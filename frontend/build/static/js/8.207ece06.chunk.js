!function(){"use strict";var e={7008:function(e,t,n){var i=n(4165),r=n(5861),s=n(5671),a=n(3144),o=n(6361),u=n(7762),c=n(9614),h=function(){function e(){(0,s.Z)(this,e),this.mediapipePorcess_=null,this.mediapipeResult_=null,this.resultCtx_=null,this.mediapipeCtx_=null,this.modelType_=null,this.resultCanvas_=new OffscreenCanvas(1,1);var t=this.resultCanvas_.getContext("2d",{alpha:!1,desynchronized:!0});if(!t)throw new Error("Unable to create OffscreenCanvasRenderingContext2D");if(this.resultCtx_=t,this.mediapipeCanvas_=new OffscreenCanvas(1,1),!(t=this.mediapipeCanvas_.getContext("2d",{alpha:!1,desynchronized:!0})))throw new Error("Unable to create OffscreenCanvasRenderingContext2D");this.mediapipeCtx_=t}return(0,a.Z)(e,[{key:"onResult",value:function(e){this.mediapipeResult_=e}},{key:"init",value:function(e,t){var n=this;return new Promise((function(i,r){n.modelType_=e,n.mediapipePorcess_=t,i()}))}},{key:"start",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"transform",value:function(e,t){var n=this;this.resultCanvas_.width==e.displayWidth&&this.resultCanvas_.height==e.displayHeight||(this.resultCanvas_.width=e.displayWidth,this.resultCanvas_.height=e.displayHeight),this.mediapipeCanvas_.width==e.displayWidth&&this.mediapipeCanvas_.height==e.displayHeight||(this.mediapipeCanvas_.width=e.displayWidth,this.mediapipeCanvas_.height=e.displayHeight);var i=e.timestamp;createImageBitmap(e).then((function(r){e.close(),n.processFrame(r,i||Date.now(),t)})).catch((function(n){console.error(n),t.enqueue(e)}))}},{key:"processFrame",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mediapipeProcess(t),this.mediapipeResult_&&this.resultCtx_?(this.resultCtx_.save(),this.resultCtx_.clearRect(0,0,this.resultCanvas_.width,this.resultCanvas_.height),this.resultCtx_.drawImage(t,0,0,t.width,t.height,0,0,this.resultCanvas_.width,this.resultCanvas_.height),"face_mesh"===this.modelType_?this.drawFaceMash():"hands"===this.modelType_?this.drawHands():"objectron"===this.modelType_?this.drawObjectron():"pose"===this.modelType_&&this.drawPose(),this.resultCtx_.restore(),r.enqueue(new VideoFrame(this.resultCanvas_,{timestamp:n,alpha:"discard"}))):r.enqueue(new VideoFrame(t,{timestamp:n,alpha:"discard"})),t.close();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"mediapipeProcess",value:function(e){var t,n;this.mediapipeCtx_.clearRect(0,0,this.mediapipeCanvas_.width,this.mediapipeCanvas_.height),null===(t=this.mediapipeCtx_)||void 0===t||t.drawImage(e,0,0,e.width,e.height,0,0,this.mediapipeCanvas_.width,this.mediapipeCanvas_.height),null===(n=this.mediapipePorcess_)||void 0===n||n.onSend(this.mediapipeCanvas_.transferToImageBitmap())}},{key:"drawFaceMash",value:function(){var e,t=this.mediapipeResult_,n=new c.ET(this.resultCtx_),i=(0,u.Z)(t.faceLandmarks);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.drawConnectors(r,c.jr.FACE_LANDMARKS_TESSELATION,{color:"#C0C0C070",lineWidth:1}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_RIGHT_EYE,{color:"#FF3030"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_RIGHT_EYEBROW,{color:"#FF3030"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_LEFT_EYE,{color:"#30FF30"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_LEFT_EYEBROW,{color:"#30FF30"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_FACE_OVAL,{color:"#E0E0E0"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_LIPS,{color:"#E0E0E0"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_RIGHT_IRIS,{color:"#FF3030"}),n.drawConnectors(r,c.jr.FACE_LANDMARKS_LEFT_IRIS,{color:"#30FF30"})}}catch(s){i.e(s)}finally{i.f()}}},{key:"drawObjectron",value:function(){var e,t=this.mediapipeResult_,n=(0,u.Z)(t.detections);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=i.boundingBox.originX,s=i.boundingBox.originY,a=i.boundingBox.width,o=i.boundingBox.height,c=i.categories[0].categoryName,h=Math.round(100*parseFloat(i.categories[0].score)),l="".concat(c," - ").concat(h,"%");this.resultCtx_.strokeStyle="#00FFFF",this.resultCtx_.lineWidth=2,this.resultCtx_.strokeRect(r,s,a,o),this.resultCtx_.fillStyle="#FFFFFF",this.resultCtx_.fillText(l,r+2,s-4)}}catch(p){n.e(p)}finally{n.f()}}},{key:"drawPose",value:function(){var e,t=new c.ET(this.resultCtx_),n=this.mediapipeResult_,i=(0,u.Z)(n.landmarks);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.drawLandmarks(r,{radius:function(e){return c.ET.lerp(e.from.z,-.15,.1,5,1)}}),t.drawConnectors(r,c.qe.POSE_CONNECTIONS)}}catch(s){i.e(s)}finally{i.f()}}},{key:"connect",value:function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i[0],s=i[1];if(r&&s){var a,o,c,h;if(r.visibility&&s.visibility&&(r.visibility<.1||s.visibility<.1))continue;null===(a=this.resultCtx_)||void 0===a||a.beginPath(),null===(o=this.resultCtx_)||void 0===o||o.moveTo(r.x*this.resultCanvas_.width,r.y*this.resultCanvas_.height),null===(c=this.resultCtx_)||void 0===c||c.lineTo(s.x*this.resultCanvas_.width,s.y*this.resultCanvas_.height),null===(h=this.resultCtx_)||void 0===h||h.stroke()}}}catch(l){n.e(l)}finally{n.f()}}},{key:"flush",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),l=h;if("function"===typeof importScripts){var p,d,f,v,_=function(){function e(){(0,s.Z)(this,e),console.log("MediapipePorcess")}return(0,a.Z)(e,[{key:"onSend",value:function(e){return new Promise((function(t){postMessage({operation:"send",info:e},[e]),t()}))}}]),e}();onmessage=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,u,c,h,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"init"===(n=t.data.operation)?(r=t.data,s=r.metaData,a=r.modelType,s&&(0,o.J7)(JSON.parse(s)),v=a,d=new l,f=new _,d.init(a,f).then((function(){(p=new o.Qi).on("error",(function(e){postMessage({operation:"mediaProcessor",type:"error",info:e})})),p.on("pipelineInfo",(function(e){postMessage({operation:"mediaProcessor",type:"pipelineInfo",info:e})})),p.on("warn",(function(e){postMessage({operation:"mediaProcessor",type:"warn",info:e})})),p.setTransformers([d]).then((function(){postMessage({operation:"init",info:"success"})})).catch((function(e){postMessage({operation:"init",error:"init error"+e})}))}))):"transform"===n?(u=t.data,c=u.readable,h=u.writable,p.transform(c,h).then((function(){postMessage({operation:"transform",info:"success"})})).catch((function(e){postMessage({operation:"transform",error:"transform error"+e})}))):"destroy"===n?p.destroy().then((function(){postMessage({operation:"destroy",info:"success"})})).catch((function(e){postMessage({operation:"destroy",error:"destroy error"+e})})):"onResults"===n&&(m=t.data.info)&&("selfie_segmentation"===v?d.onResult(m):d.onResult(JSON.parse(m)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.x=function(){var e=n.O(void 0,[246],(function(){return n(7008)}));return e=n.O(e)},function(){var e=[];n.O=function(t,i,r,s){if(!i){var a=1/0;for(h=0;h<e.length;h++){i=e[h][0],r=e[h][1],s=e[h][2];for(var o=!0,u=0;u<i.length;u++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[u])}))?i.splice(u--,1):(o=!1,s<a&&(a=s));if(o){e.splice(h--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,r,s]}}(),n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b0d87eca.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",function(){var e={8:1};n.f.i=function(t,i){e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkremote_monitoring=self.webpackChunkremote_monitoring||[],i=t.push.bind(t);t.push=function(t){var r=t[0],s=t[1],a=t[2];for(var o in s)n.o(s,o)&&(n.m[o]=s[o]);for(a&&a(n);r.length;)e[r.pop()]=1;i(t)}}(),function(){var e=n.x;n.x=function(){return n.e(246).then(e)}}();n.x()}();
//# sourceMappingURL=8.207ece06.chunk.js.map