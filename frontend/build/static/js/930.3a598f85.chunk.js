!function(){"use strict";var t={930:function(t,e,i){var n=i(4165),s=i(5861),r=i(5671),o=i(3144),a=i(6361),l=i(7762),h={};(function(){function t(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i.g&&i.g];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function s(t,i){if(i)t:{var s=n;t=t.split(".");for(var r=0;r<t.length-1;r++){var o=t[r];if(!(o in s))break t;s=s[o]}(i=i(r=s[t=t[t.length-1]]))!=r&&null!=i&&e(s,t,{configurable:!0,writable:!0,value:i})}}function r(e){var i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return i?i.call(e):{next:t(e)}}var o="function"==typeof Object.assign?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t};function a(t){return t||Array.prototype.fill}s("Object.assign",(function(t){return t||o})),s("Array.prototype.fill",(function(t){return t||function(t,e,i){var n=this.length||0;for(0>e&&(e=Math.max(0,n+e)),(null==i||i>n)&&(i=n),0>(i=Number(i))&&(i=Math.max(0,n+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}})),s("Int8Array.prototype.fill",a),s("Uint8Array.prototype.fill",a),s("Uint8ClampedArray.prototype.fill",a),s("Int16Array.prototype.fill",a),s("Uint16Array.prototype.fill",a),s("Int32Array.prototype.fill",a),s("Uint32Array.prototype.fill",a),s("Float32Array.prototype.fill",a),s("Float64Array.prototype.fill",a);var l=this||self;function h(t,e){t=t.split(".");var i,n=l;t[0]in n||"undefined"==typeof n.execScript||n.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=e}var d={color:"white",lineWidth:4,radius:6,visibilityMin:.5};function u(t){return t=t||{},Object.assign(Object.assign(Object.assign({},d),{fillColor:t.color}),t)}function c(t,e){return t instanceof Function?t(e):t}function p(t,e,i){return Math.max(Math.min(e,i),Math.min(Math.max(e,i),t))}h("clamp",p),h("drawLandmarks",(function(t,e,i){if(e){i=u(i),t.save();for(var n=t.canvas,s=0,o=(e=r(e)).next();!o.done;o=e.next())if(void 0!==(o=o.value)&&(void 0===o.visibility||o.visibility>i.visibilityMin)){t.fillStyle=c(i.fillColor,{index:s,from:o}),t.strokeStyle=c(i.color,{index:s,from:o}),t.lineWidth=c(i.lineWidth,{index:s,from:o});var a=new Path2D;a.arc(o.x*n.width,o.y*n.height,c(i.radius,{index:s,from:o}),0,2*Math.PI),t.fill(a),t.stroke(a),++s}t.restore()}})),h("drawConnectors",(function(t,e,i,n){if(e&&i){n=u(n),t.save();for(var s=t.canvas,o=0,a=(i=r(i)).next();!a.done;a=i.next()){var l=a.value;t.beginPath(),a=e[l[0]],l=e[l[1]],a&&l&&(void 0===a.visibility||a.visibility>n.visibilityMin)&&(void 0===l.visibility||l.visibility>n.visibilityMin)&&(t.strokeStyle=c(n.color,{index:o,from:a,to:l}),t.lineWidth=c(n.lineWidth,{index:o,from:a,to:l}),t.moveTo(a.x*s.width,a.y*s.height),t.lineTo(l.x*s.width,l.y*s.height)),++o,t.stroke()}t.restore()}})),h("drawRectangle",(function(t,e,i){i=u(i),t.save();var n=t.canvas;t.beginPath(),t.lineWidth=c(i.lineWidth,{}),t.strokeStyle=c(i.color,{}),t.fillStyle=c(i.fillColor,{}),t.translate(e.xCenter*n.width,e.yCenter*n.height),t.rotate(e.rotation*Math.PI/180),t.rect(-e.width/2*n.width,-e.height/2*n.height,e.width*n.width,e.height*n.height),t.translate(-e.xCenter*n.width,-e.yCenter*n.height),t.stroke(),t.fill(),t.restore()})),h("lerp",(function(t,e,i,n,s){return p(n*(1-(t-e)/(i-e))+s*(1-(i-t)/(i-e)),n,s)}))}).call(h);var d=h,u=function(){function t(){(0,r.Z)(this,t),this.mediapipePorcess_=null,this.mediapipeResult_=null,this.mediapipeConsts_=null,this.mediapipeSelfieResult_=null,this.resultCtx_=null,this.mediapipeCtx_=null,this.modelType_=null,this.resultCanvas_=new OffscreenCanvas(1,1);var e=this.resultCanvas_.getContext("2d",{alpha:!1,desynchronized:!0});if(!e)throw new Error("Unable to create OffscreenCanvasRenderingContext2D");if(this.resultCtx_=e,this.mediapipeCanvas_=new OffscreenCanvas(1,1),!(e=this.mediapipeCanvas_.getContext("2d",{alpha:!1,desynchronized:!0})))throw new Error("Unable to create OffscreenCanvasRenderingContext2D");this.mediapipeCtx_=e}return(0,o.Z)(t,[{key:"setMediapipeConsts",value:function(t){this.mediapipeConsts_=t}},{key:"onResult",value:function(t){t instanceof ImageBitmap?this.mediapipeSelfieResult_=t:this.mediapipeResult_=t}},{key:"init",value:function(t,e){var i=this;return new Promise((function(n,s){i.modelType_=t,i.mediapipePorcess_=e,n()}))}},{key:"start",value:function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"transform",value:function(t,e){var i=this;this.resultCanvas_.width==t.displayWidth&&this.resultCanvas_.height==t.displayHeight||(this.resultCanvas_.width=t.displayWidth,this.resultCanvas_.height=t.displayHeight),this.mediapipeCanvas_.width==t.displayWidth&&this.mediapipeCanvas_.height==t.displayHeight||(this.mediapipeCanvas_.width=t.displayWidth,this.mediapipeCanvas_.height=t.displayHeight);var n=t.timestamp;createImageBitmap(t).then((function(s){t.close(),i.processFrame(s,n||Date.now(),e)})).catch((function(i){console.error(i),e.enqueue(t)}))}},{key:"processFrame",value:function(){var t=(0,s.Z)((0,n.Z)().mark((function t(e,i,s){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mediapipeProcess(e),(this.mediapipeResult_||this.mediapipeSelfieResult_)&&this.resultCtx_?(this.resultCtx_.save(),this.resultCtx_.clearRect(0,0,this.resultCanvas_.width,this.resultCanvas_.height),"selfie_segmentation"!=this.modelType_&&this.resultCtx_.drawImage(e,0,0,e.width,e.height,0,0,this.resultCanvas_.width,this.resultCanvas_.height),"face_detection"===this.modelType_?this.drawFaceDetaction():"face_mesh"===this.modelType_?this.drawFaceMash():"hands"===this.modelType_?this.drawHands():"holistic"===this.modelType_?this.drawHolistic():"objectron"===this.modelType_?this.drawObjectron():"selfie_segmentation"===this.modelType_?this.drawSelfie(e):"pose"===this.modelType_&&this.drawPose(),this.resultCtx_.restore(),s.enqueue(new VideoFrame(this.resultCanvas_,{timestamp:i,alpha:"discard"}))):s.enqueue(new VideoFrame(e,{timestamp:i,alpha:"discard"})),e.close();case 3:case"end":return t.stop()}}),t,this)})));return function(e,i,n){return t.apply(this,arguments)}}()},{key:"mediapipeProcess",value:function(t){var e,i;this.mediapipeCtx_.clearRect(0,0,this.mediapipeCanvas_.width,this.mediapipeCanvas_.height),null===(e=this.mediapipeCtx_)||void 0===e||e.drawImage(t,0,0,t.width,t.height,0,0,this.mediapipeCanvas_.width,this.mediapipeCanvas_.height),null===(i=this.mediapipePorcess_)||void 0===i||i.onSend(this.mediapipeCanvas_.transferToImageBitmap())}},{key:"drawFaceDetaction",value:function(){var t=this.mediapipeResult_;t.detections.length>0&&(d.drawRectangle(this.resultCtx_,t.detections[0].boundingBox,{color:"blue",lineWidth:4,fillColor:"#00000000"}),d.drawLandmarks(this.resultCtx_,t.detections[0].landmarks,{color:"red",radius:5}))}},{key:"drawFaceMash",value:function(){var t=this.mediapipeResult_;if(t.multiFaceLandmarks){var e,i=(0,l.Z)(t.multiFaceLandmarks);try{for(i.s();!(e=i.n()).done;){var n,s,r,o,a,h,u,c,p,f=e.value;d.drawConnectors(this.resultCtx_,f,null===(n=this.mediapipeConsts_)||void 0===n?void 0:n.facemash.FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:1}),d.drawConnectors(this.resultCtx_,f,null===(s=this.mediapipeConsts_)||void 0===s?void 0:s.facemash.FACEMESH_RIGHT_EYE,{color:"#FF3030"}),d.drawConnectors(this.resultCtx_,f,null===(r=this.mediapipeConsts_)||void 0===r?void 0:r.facemash.FACEMESH_RIGHT_EYEBROW,{color:"#FF3030"}),d.drawConnectors(this.resultCtx_,f,null===(o=this.mediapipeConsts_)||void 0===o?void 0:o.facemash.FACEMESH_LEFT_EYE,{color:"#30FF30"}),d.drawConnectors(this.resultCtx_,f,null===(a=this.mediapipeConsts_)||void 0===a?void 0:a.facemash.FACEMESH_LEFT_EYEBROW,{color:"#30FF30"}),d.drawConnectors(this.resultCtx_,null===(h=this.mediapipeConsts_)||void 0===h?void 0:h.facemash.FACEMESH_FACE_OVAL,{color:"#E0E0E0"}),d.drawConnectors(this.resultCtx_,null===(u=this.mediapipeConsts_)||void 0===u?void 0:u.facemash.FACEMESH_LIPS,{color:"#E0E0E0"}),d.drawConnectors(this.resultCtx_,f,null===(c=this.mediapipeConsts_)||void 0===c?void 0:c.facemash.FACEMESH_RIGHT_IRIS,{color:"#FF3030"}),d.drawConnectors(this.resultCtx_,f,null===(p=this.mediapipeConsts_)||void 0===p?void 0:p.facemash.FACEMESH_LEFT_IRIS,{color:"#30FF30"})}}catch(v){i.e(v)}finally{i.f()}}}},{key:"drawHands",value:function(){var t=this.mediapipeResult_;if(t.multiHandLandmarks&&t.multiHandedness)for(var e=0;e<t.multiHandLandmarks.length;e++){var i,n="Right"===t.multiHandedness[e].label,s=t.multiHandLandmarks[e];d.drawConnectors(this.resultCtx_,s,null===(i=this.mediapipeConsts_)||void 0===i?void 0:i.hands.HAND_CONNECTIONS,{color:n?"#00FF00":"#FF0000"}),d.drawLandmarks(this.resultCtx_,s,{color:n?"#00FF00":"#FF0000",fillColor:n?"#FF0000":"#00FF00",radius:function(t){return d.lerp(t.from.z,-.15,.1,10,1)}})}}},{key:"connect",value:function(t){var e,i=(0,l.Z)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value,s=n[0],r=n[1];if(s&&r){var o,a,h,d;if(s.visibility&&r.visibility&&(s.visibility<.1||r.visibility<.1))continue;null===(o=this.resultCtx_)||void 0===o||o.beginPath(),null===(a=this.resultCtx_)||void 0===a||a.moveTo(s.x*this.resultCanvas_.width,s.y*this.resultCanvas_.height),null===(h=this.resultCtx_)||void 0===h||h.lineTo(r.x*this.resultCanvas_.width,r.y*this.resultCanvas_.height),null===(d=this.resultCtx_)||void 0===d||d.stroke()}}}catch(u){i.e(u)}finally{i.f()}}},{key:"drawHolistic",value:function(){var t=this.mediapipeResult_;if(this.resultCtx_){var e,i,n,s,r,o,a;if(this.resultCtx_.lineWidth=5,t.poseLandmarks)d.drawConnectors(this.resultCtx_,t.poseLandmarks,null===(e=this.mediapipeConsts_)||void 0===e?void 0:e.holistic.POSE_CONNECTIONS,{color:"white"}),d.drawLandmarks(this.resultCtx_,Object.values(null===(i=this.mediapipeConsts_)||void 0===i?void 0:i.holistic.POSE_LANDMARKS_LEFT).map((function(e){return t.poseLandmarks[e]})),{visibilityMin:.65,color:"white",fillColor:"rgb(255,138,0)"}),d.drawLandmarks(this.resultCtx_,Object.values(null===(n=this.mediapipeConsts_)||void 0===n?void 0:n.holistic.POSE_LANDMARKS_RIGHT).map((function(e){return t.poseLandmarks[e]})),{visibilityMin:.65,color:"white",fillColor:"rgb(0,217,231)"});if(t.rightHandLandmarks)this.resultCtx_.strokeStyle="white",this.connect([[t.poseLandmarks[null===(s=this.mediapipeConsts_)||void 0===s?void 0:s.holistic.POSE_LANDMARKS.RIGHT_ELBOW],t.rightHandLandmarks[0]]]),d.drawConnectors(this.resultCtx_,t.rightHandLandmarks,null===(r=this.mediapipeConsts_)||void 0===r?void 0:r.holistic.HAND_CONNECTIONS,{color:"white"}),d.drawLandmarks(this.resultCtx_,t.rightHandLandmarks,{color:"white",fillColor:"rgb(0,217,231)",lineWidth:2,radius:function(t){return d.lerp(t.from.z,-.15,.1,10,1)}});if(t.leftHandLandmarks)this.resultCtx_.strokeStyle="white",this.connect([[t.poseLandmarks[null===(o=this.mediapipeConsts_)||void 0===o?void 0:o.holistic.POSE_LANDMARKS.LEFT_ELBOW],t.leftHandLandmarks[0]]]),d.drawConnectors(this.resultCtx_,t.leftHandLandmarks,null===(a=this.mediapipeConsts_)||void 0===a?void 0:a.holistic.HAND_CONNECTIONS,{color:"white"}),d.drawLandmarks(this.resultCtx_,t.leftHandLandmarks,{color:"white",fillColor:"rgb(255,138,0)",lineWidth:2,radius:function(t){return d.lerp(t.from.z,-.15,.1,10,1)}})}}},{key:"drawObjectron",value:function(){var t=this.mediapipeResult_;if(t.objectDetections){var e,i=(0,l.Z)(t.objectDetections);try{for(i.s();!(e=i.n()).done;){var n,s=e.value.keypoints.map((function(t){return t.point2d}));d.drawConnectors(this.resultCtx_,s,null===(n=this.mediapipeConsts_)||void 0===n?void 0:n.objectron.BOX_CONNECTIONS,{color:"#FF0000"}),d.drawLandmarks(this.resultCtx_,[s[0]],{color:"#FFFFFF"})}}catch(r){i.e(r)}finally{i.f()}}}},{key:"drawSelfie",value:function(t){this.resultCtx_&&this.mediapipeSelfieResult_&&(this.resultCtx_.globalCompositeOperation="copy",this.resultCtx_.drawImage(this.mediapipeSelfieResult_,0,0,this.resultCanvas_.width,this.resultCanvas_.height),this.resultCtx_.globalCompositeOperation="source-atop",this.resultCtx_.filter="none",this.resultCtx_.drawImage(t,0,0,t.width,t.height),this.resultCtx_.globalCompositeOperation="destination-over",this.resultCtx_.fillStyle="#0000FFFF",this.resultCtx_.fillRect(0,0,this.resultCanvas_.width,this.resultCanvas_.height))}},{key:"drawPose",value:function(){var t,e,i,n,s=this.mediapipeResult_;s.poseLandmarks&&this.resultCtx_&&(d.drawConnectors(this.resultCtx_,s.poseLandmarks,null===(t=this.mediapipeConsts_)||void 0===t?void 0:t.pose.POSE_CONNECTIONS,{visibilityMin:.65,color:"white"}),d.drawLandmarks(this.resultCtx_,Object.values(null===(e=this.mediapipeConsts_)||void 0===e?void 0:e.pose.POSE_LANDMARKS_LEFT).map((function(t){return s.poseLandmarks[t]})),{visibilityMin:.65,color:"white",fillColor:"rgb(255,138,0)"}),d.drawLandmarks(this.resultCtx_,Object.values(null===(i=this.mediapipeConsts_)||void 0===i?void 0:i.pose.POSE_LANDMARKS_RIGHT).map((function(t){return s.poseLandmarks[t]})),{visibilityMin:.65,color:"white",fillColor:"rgb(0,217,231)"}),d.drawLandmarks(this.resultCtx_,Object.values(null===(n=this.mediapipeConsts_)||void 0===n?void 0:n.pose.POSE_LANDMARKS_NEUTRAL).map((function(t){return s.poseLandmarks[t]})),{visibilityMin:.65,color:"white",fillColor:"white"}))}},{key:"flush",value:function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mediapipeSelfieResult_&&this.mediapipeSelfieResult_.close();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),c=u;if("function"===typeof importScripts){var p,f,v,m,C=function(){function t(){(0,r.Z)(this,t),console.log("MediapipePorcess")}return(0,o.Z)(t,[{key:"onSend",value:function(t){return new Promise((function(e){postMessage({operation:"send",info:t},[t]),e()}))}}]),t}();onmessage=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(e){var i,s,r,o,l,h,d,u,_;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"init"===(i=e.data.operation)?(s=e.data,r=s.metaData,o=s.modelType,l=s.mediapipeConsts,r&&(0,a.J7)(JSON.parse(r)),m=o,f=new c,v=new C,f.setMediapipeConsts(JSON.parse(l)),f.init(o,v).then((function(){(p=new a.Qi).on("error",(function(t){postMessage({operation:"mediaProcessor",type:"error",info:t})})),p.on("pipelineInfo",(function(t){postMessage({operation:"mediaProcessor",type:"pipelineInfo",info:t})})),p.on("warn",(function(t){postMessage({operation:"mediaProcessor",type:"warn",info:t})})),p.setTransformers([f]).then((function(){postMessage({operation:"init",info:"success"})})).catch((function(t){postMessage({operation:"init",error:"init error"+t})}))}))):"transform"===i?(h=e.data,d=h.readable,u=h.writable,p.transform(d,u).then((function(){postMessage({operation:"transform",info:"success"})})).catch((function(t){postMessage({operation:"transform",error:"transform error"+t})}))):"destroy"===i?p.destroy().then((function(){postMessage({operation:"destroy",info:"success"})})).catch((function(t){postMessage({operation:"destroy",error:"destroy error"+t})})):"onResults"===i&&(_=e.data.info)&&("selfie_segmentation"===m?f.onResult(_):f.onResult(JSON.parse(_)));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.m=t,i.x=function(){var t=i.O(void 0,[361],(function(){return i(930)}));return t=i.O(t)},function(){var t=[];i.O=function(e,n,s,r){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],r=t[d][2];for(var a=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((function(t){return i.O[t](n[l])}))?n.splice(l--,1):(a=!1,r<o&&(o=r));if(a){t.splice(d--,1);var h=s();void 0!==h&&(e=h)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[n,s,r]}}(),i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,n){return i.f[n](t,e),e}),[]))},i.u=function(t){return"static/js/"+t+".60256b86.chunk.js"},i.miniCssF=function(t){},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",function(){var t={930:1};i.f.i=function(e,n){t[e]||importScripts(i.p+i.u(e))};var e=self.webpackChunkremote_patient_monitoring=self.webpackChunkremote_patient_monitoring||[],n=e.push.bind(e);e.push=function(e){var s=e[0],r=e[1],o=e[2];for(var a in r)i.o(r,a)&&(i.m[a]=r[a]);for(o&&o(i);s.length;)t[s.pop()]=1;n(e)}}(),function(){var t=i.x;i.x=function(){return i.e(361).then(t)}}();i.x()}();
//# sourceMappingURL=930.3a598f85.chunk.js.map