{"version":3,"file":"static/js/8.207ece06.chunk.js","mappings":"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","sources":["helpers/mediapipeTransformer.js","helpers/MediaProcessorHelperThread.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["/* global VideoFrame */\nimport { FaceLandmarker, PoseLandmarker, DrawingUtils } from \"@mediapipe/tasks-vision\";\n\nclass MediapipeTransformer {\n   \n    mediapipePorcess_ = null\n    mediapipeResult_ = null\n    \n    resultCanvas_ ;\n    resultCtx_ = null\n\n    mediapipeCanvas_;\n    mediapipeCtx_ = null\n\n    modelType_ = null\n    constructor(){\n        this.resultCanvas_ = new OffscreenCanvas(1, 1)\n        let ctx = this.resultCanvas_.getContext('2d', {alpha: false, desynchronized: true})\n        if(ctx){\n            this.resultCtx_ = ctx\n        }else {\n            throw new Error('Unable to create OffscreenCanvasRenderingContext2D');\n        }\n\n        this.mediapipeCanvas_ = new OffscreenCanvas(1, 1)\n        ctx = this.mediapipeCanvas_.getContext('2d', {alpha: false, desynchronized: true})\n        if(ctx){\n            this.mediapipeCtx_ = ctx\n        }else {\n            throw new Error('Unable to create OffscreenCanvasRenderingContext2D');\n        }\n    }\n\n    onResult(result) {\n        // if(result instanceof ImageBitmap){\n        //     this.mediapipeSelfieResult_ = result\n        //     return\n        // }\n        this.mediapipeResult_ = result\n    }\n    \n    init(modelType, mediapipePorcess){\n        return new Promise((resolve, reject) => {\n            this.modelType_ = modelType\n            this.mediapipePorcess_ = mediapipePorcess\n            resolve()\n        })\n    }\n\n    async start() {\n\n    }\n\n    transform(frame, controller) {\n        if(this.resultCanvas_.width != frame.displayWidth || this.resultCanvas_.height != frame.displayHeight){\n            this.resultCanvas_.width = frame.displayWidth\n            this.resultCanvas_.height = frame.displayHeight\n        }\n        if(this.mediapipeCanvas_.width != frame.displayWidth || this.mediapipeCanvas_.height != frame.displayHeight){\n            this.mediapipeCanvas_.width = frame.displayWidth\n            this.mediapipeCanvas_.height = frame.displayHeight\n        }\n        let timestamp = frame.timestamp\n        createImageBitmap(frame).then( image => {\n            frame.close()\n            this.processFrame(image, timestamp ? timestamp : Date.now(), controller)\n            \n        }).catch(e => {\n            console.error(e)\n            controller.enqueue(frame)\n        })\n    }\n\n    async processFrame(image, timestamp, controller){\n        this.mediapipeProcess(image)\n        if(this.mediapipeResult_ && this.resultCtx_){\n            this.resultCtx_.save()\n            this.resultCtx_.clearRect(0, 0, this.resultCanvas_.width, this.resultCanvas_.height)\n            this.resultCtx_.drawImage(image,\n                0,\n                0,\n                image.width,\n                image.height,\n                0,\n                0,\n                this.resultCanvas_.width,\n                this.resultCanvas_.height)\n\n            if( this.modelType_ === 'face_mesh'){\n                this.drawFaceMash()\n            } else if( this.modelType_ === 'hands'){\n                this.drawHands()\n            }\n            else if( this.modelType_ === 'objectron' ){\n                this.drawObjectron()\n            } else if(this.modelType_ === 'pose'){\n                this.drawPose()\n            }\n            this.resultCtx_.restore()\n            // @ts-ignore\n            controller.enqueue(new VideoFrame(this.resultCanvas_, {timestamp, alpha: 'discard'}))\n        }else {\n            controller.enqueue(new VideoFrame(image, {timestamp, alpha: 'discard'}))\n        }\n        image.close()\n    }\n\n    mediapipeProcess(image){\n        this.mediapipeCtx_.clearRect(0, 0, this.mediapipeCanvas_.width, this.mediapipeCanvas_.height)\n        this.mediapipeCtx_?.drawImage(\n            image,\n            0,\n            0,\n            image.width,\n            image.height,\n            0,\n            0,\n            this.mediapipeCanvas_.width,\n            this.mediapipeCanvas_.height\n        )\n        this.mediapipePorcess_?.onSend(this.mediapipeCanvas_.transferToImageBitmap())\n    }\n\n    drawFaceMash() {\n        let result = this.mediapipeResult_\n        const drawingUtils = new DrawingUtils(this.resultCtx_);\n        for (const landmarks of result.faceLandmarks) {\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_TESSELATION,\n            { color: \"#C0C0C070\", lineWidth: 1 }\n            );\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_RIGHT_EYE,\n            { color: \"#FF3030\" }\n            );\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_RIGHT_EYEBROW,\n            { color: \"#FF3030\" }\n            );\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_LEFT_EYE,\n            { color: \"#30FF30\" }\n            );\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_LEFT_EYEBROW,\n            { color: \"#30FF30\" }\n            );\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_FACE_OVAL,\n            { color: \"#E0E0E0\" }\n            );\n            drawingUtils.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_LIPS, {\n            color: \"#E0E0E0\"\n            });\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_RIGHT_IRIS,\n            { color: \"#FF3030\" }\n            );\n            drawingUtils.drawConnectors(\n            landmarks,\n            FaceLandmarker.FACE_LANDMARKS_LEFT_IRIS,\n            { color: \"#30FF30\" }\n            );\n        }\n    }\n\n    drawObjectron() {\n        let result = this.mediapipeResult_\n        for (let detection of result.detections) {\n            // Extract bounding box dimensions\n            const x = detection.boundingBox.originX;\n            const y = detection.boundingBox.originY;\n            const width = detection.boundingBox.width;\n            const height = detection.boundingBox.height;\n\n            // Label and confidence\n            const label = detection.categories[0].categoryName;\n            const confidence = Math.round(parseFloat(detection.categories[0].score) * 100);\n            const text = `${label} - ${confidence}%`;\n\n            // Draw bounding box\n            this.resultCtx_.strokeStyle = '#00FFFF'; // cyan color\n            this.resultCtx_.lineWidth = 2;\n            this.resultCtx_.strokeRect(x, y, width, height);\n\n            // Draw text\n            this.resultCtx_.fillStyle = '#FFFFFF';\n            this.resultCtx_.fillText(text, x + 2, y - 4);\n        }\n    }\n\n    drawPose() {\n        const drawingUtils = new DrawingUtils(this.resultCtx_);\n        let result = this.mediapipeResult_\n\n        for (const landmark of result.landmarks) {\n            drawingUtils.drawLandmarks(landmark, {\n            radius: (data) => DrawingUtils.lerp(data.from.z, -0.15, 0.1, 5, 1)\n            });\n            drawingUtils.drawConnectors(landmark, PoseLandmarker.POSE_CONNECTIONS);\n        }\n    }\n\n    connect(connectors) {\n      for (const connector of connectors) {\n        const from = connector[0];\n        const to = connector[1];\n        if (from && to) {\n          if (from.visibility && to.visibility &&\n              (from.visibility < 0.1 || to.visibility < 0.1)) {\n            continue;\n          }\n          this.resultCtx_?.beginPath();\n          this.resultCtx_?.moveTo(from.x * this.resultCanvas_.width, from.y * this.resultCanvas_.height);\n          this.resultCtx_?.lineTo(to.x * this.resultCanvas_.width, to.y * this.resultCanvas_.height);\n          this.resultCtx_?.stroke();\n        }\n      }\n    }\n\n    async flush() {\n    }\n}\nexport default MediapipeTransformer","import {MediaProcessor, setVonageMetadata} from '@vonage/media-processor'\nimport MediapipeTransformer from './mediapipeTransformer'\n\n\nif( 'function' === typeof importScripts) {\n    class MediapipePorcess {\n        constructor() {\n            console.log('MediapipePorcess')\n        }\n        \n        onSend(data) {\n            return new Promise((resolve) => {\n                postMessage({\n                    operation: 'send',\n                    info: data\n                }, [data])\n                resolve()\n            })\n        }\n    }\n    let mediaProcessor_\n    let mediaipeTransformer_\n    let mediapipePorcess_\n    let modelType_\n\n    onmessage = async (event) => {\n        const {operation} = event.data\n\n        if(operation === 'init'){\n            const {metaData, modelType} = event.data\n            if(metaData){\n                setVonageMetadata(JSON.parse(metaData))\n            }\n            modelType_ = modelType\n            mediaipeTransformer_ = new MediapipeTransformer()\n            mediapipePorcess_ = new MediapipePorcess()\n            mediaipeTransformer_.init(modelType, mediapipePorcess_).then( () => {\n                mediaProcessor_ = new MediaProcessor()\n                mediaProcessor_.on('error', e => {\n                    postMessage({\n                        operation: 'mediaProcessor',\n                        type: 'error',\n                        info: e\n                    })\n                })\n\n                mediaProcessor_.on('pipelineInfo', i => {\n                    postMessage({\n                        operation: 'mediaProcessor',\n                        type: 'pipelineInfo',\n                        info: i\n                    })\n                })\n\n                mediaProcessor_.on('warn', w => {\n                    postMessage({\n                        operation: 'mediaProcessor',\n                        type: 'warn',\n                        info: w\n                    })\n                })\n\n                mediaProcessor_.setTransformers([mediaipeTransformer_]).then( () => {\n                    postMessage({\n                        operation: 'init',\n                        info: 'success'\n                    })\n                }).catch(e => {\n                    postMessage({\n                        operation: 'init',\n                        error: 'init error' + e\n                    })\n                })\n            })\n        } else if(operation === 'transform'){\n            const {readable, writable} = event.data\n            mediaProcessor_.transform(readable, writable).then(() => {\n                postMessage({\n                    operation: 'transform',\n                    info: 'success'\n                })\n            }).catch(e => {\n                postMessage({\n                    operation: 'transform',\n                    error: 'transform error' + e\n                })\n            })\n\n        } else if(operation === 'destroy'){\n            mediaProcessor_.destroy().then( () => {\n                postMessage({\n                    operation: 'destroy',\n                    info: 'success'\n                })\n            }).catch(e => {\n                postMessage({\n                    operation: 'destroy',\n                    error: 'destroy error' + e\n                })\n            })\n\n        } else if(operation === 'onResults'){\n            const {info} = event.data\n            if(info){\n                if(modelType_ === 'selfie_segmentation'){\n                    mediaipeTransformer_.onResult(info)\n                }else{\n                    mediaipeTransformer_.onResult(JSON.parse(info))\n                }\n            }\n        }\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [246], function() { return __webpack_require__(7008); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"b0d87eca\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t8: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkremote_monitoring\"] = self[\"webpackChunkremote_monitoring\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(246).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["MediapipeTransformer","mediapipePorcess_","mediapipeResult_","resultCtx_","mediapipeCtx_","modelType_","this","resultCanvas_","OffscreenCanvas","ctx","getContext","alpha","desynchronized","Error","mediapipeCanvas_","result","modelType","mediapipePorcess","Promise","resolve","reject","frame","controller","width","displayWidth","height","displayHeight","timestamp","createImageBitmap","then","image","close","processFrame","Date","now","catch","e","console","error","enqueue","mediapipeProcess","save","clearRect","drawImage","drawFaceMash","drawHands","drawObjectron","drawPose","restore","VideoFrame","onSend","transferToImageBitmap","drawingUtils","DrawingUtils","faceLandmarks","landmarks","drawConnectors","FaceLandmarker","color","lineWidth","detections","detection","x","boundingBox","originX","y","originY","label","categories","categoryName","confidence","Math","round","parseFloat","score","text","strokeStyle","strokeRect","fillStyle","fillText","landmark","drawLandmarks","radius","data","from","z","PoseLandmarker","connectors","connector","to","visibility","beginPath","moveTo","lineTo","stroke","importScripts","mediaProcessor_","mediaipeTransformer_","MediapipePorcess","log","postMessage","operation","info","onmessage","event","metaData","setVonageMetadata","JSON","parse","init","MediaProcessor","on","type","i","w","setTransformers","readable","writable","transform","destroy","onResult","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","__webpack_exports__","O","deferred","chunkIds","fn","priority","notFulfilled","Infinity","length","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","get","f","chunkId","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","chunkLoadingGlobal","self","parentChunkLoadingFunction","push","bind","moreModules","runtime","pop","next"],"sourceRoot":""}